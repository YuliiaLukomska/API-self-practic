{"version":3,"file":"commonHelpers.js","sources":["../src/js/APIinstance.js","../src/js/refs.js","../src/js/MarkupCreation.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// задаємо по дефолту базове URL(див.документацію axios)\nexport const instanceAPI = axios.create({\n  baseURL: 'https://dummyjson.com',\n});\n","export const refs = {\n  allProductsRef: document.querySelector('#allProducts'),\n  singleProductForm: document.querySelector('#singleProductForm'),\n  singleProductDiv: document.querySelector('#singleProduct'),\n  newProductSingleForm: document.querySelector('#newProductSingleForm'),\n  newProductSection: document.querySelector('#newProductSection'),\n  deletionProductForm: document.querySelector('#deletionProductForm'),\n};\n","function createProductsMarkup(products) {\n  const markup = products\n    .map(\n      ({ title, description, price }) =>\n        `<li><h3>${title}</h3>\n      <p>${description}</p>\n      <p>${price}</p></li>`\n    )\n    .join('');\n  return markup;\n}\n\nfunction createMarkupById({ title, description, price }) {\n  return `<li><h3>${title}</h3>\n      <p>${description}</p>\n      <p>${price}</p></li>`;\n}\n\nexport { createProductsMarkup, createMarkupById };\n","// 1.Створити функцію, при виклику якої буде робитись запит на всі продукти і по результату запиту буде рендеритись розмітка.\n// 2. При сабміті форми робиться розмітка одного продукту по id.\n// 3. За даними, які будуть введені в форму, створити новий продукт (метод post) і відрендирити його (розмітка).\n// 4.Видаліть продукт за його ID. Якщо успішно, виведіть через alert SUCCESS та інфо про\n// видалений продукт, інакше виведіть ERROR та причину помилки.\n\nimport { instanceAPI } from './js/APIinstance';\nimport { refs } from './js/refs';\nimport { createProductsMarkup, createMarkupById } from './js/MarkupCreation';\nimport { getAllProducts } from './js/getAllProducts';\nimport { getData } from './js/AllProductGetting';\n\n// getData();\n\n// Завдання 2\nrefs.singleProductForm.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  const inputValue = event.currentTarget.elements.id.value.trim();\n  try {\n    const result = await getById(inputValue);\n    refs.singleProductDiv.innerHTML = createMarkupById(result);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function getById(inputValue) {\n  const response = await instanceAPI.get(`/products/${inputValue}`);\n  return response.data;\n}\n//\n// Завдання 3\n\nrefs.newProductSingleForm.addEventListener('submit', onFormSubmitForNewProduct);\n\nasync function onFormSubmitForNewProduct(event) {\n  event.preventDefault();\n  const data = {};\n  new FormData(event.currentTarget).forEach((value, key) => {\n    data[key] = value;\n  });\n  try {\n    const result = await postData(data);\n    refs.newProductSection.innerHTML = createMarkupById(result);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function postData(data) {\n  const response = await instanceAPI.post('/products/add', data);\n  return response.data;\n}\n// Завдання 4\n\nrefs.deletionProductForm.addEventListener('submit', onDeletionFormSubmit);\n\nasync function onDeletionFormSubmit(event) {\n  event.preventDefault();\n  const deletionId = event.currentTarget.elements.deletionId.value.trim();\n  try {\n    const result = await deletionProductById(deletionId);\n\n    if (result.isDeleted) {\n      alert(`Success, product ${result.title} was deleted`);\n    }\n  } catch (error) {\n    alert(`There are not a product with this ID. ${error}`);\n  }\n}\n\nasync function deletionProductById(deletionId) {\n  try {\n    const response = await instanceAPI.delete(`/products/${deletionId}`);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["instanceAPI","axios","refs","createMarkupById","title","description","price","onFormSubmit","event","inputValue","result","getById","error","onFormSubmitForNewProduct","data","value","key","postData","onDeletionFormSubmit","deletionId","deletionProductById"],"mappings":"ivBAEO,MAAMA,EAAcC,EAAM,OAAO,CACtC,QAAS,uBACX,CAAC,ECJYC,EAAO,CAClB,eAAgB,SAAS,cAAc,cAAc,EACrD,kBAAmB,SAAS,cAAc,oBAAoB,EAC9D,iBAAkB,SAAS,cAAc,gBAAgB,EACzD,qBAAsB,SAAS,cAAc,uBAAuB,EACpE,kBAAmB,SAAS,cAAc,oBAAoB,EAC9D,oBAAqB,SAAS,cAAc,sBAAsB,CACpE,ECKA,SAASC,EAAiB,CAAE,MAAAC,EAAO,YAAAC,EAAa,MAAAC,CAAK,EAAI,CACvD,MAAO,WAAWF,CAAK;AAAA,WACdC,CAAW;AAAA,WACXC,CAAK,WAChB,CCDAJ,EAAK,kBAAkB,iBAAiB,SAAUK,CAAY,EAE9D,eAAeA,EAAaC,EAAO,CACjCA,EAAM,eAAc,EACpB,MAAMC,EAAaD,EAAM,cAAc,SAAS,GAAG,MAAM,OACzD,GAAI,CACF,MAAME,EAAS,MAAMC,EAAQF,CAAU,EACvCP,EAAK,iBAAiB,UAAYC,EAAiBO,CAAM,CAC1D,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,eAAeD,EAAQF,EAAY,CAEjC,OADiB,MAAMT,EAAY,IAAI,aAAaS,CAAU,EAAE,GAChD,IAClB,CAIAP,EAAK,qBAAqB,iBAAiB,SAAUW,CAAyB,EAE9E,eAAeA,EAA0BL,EAAO,CAC9CA,EAAM,eAAc,EACpB,MAAMM,EAAO,CAAA,EACb,IAAI,SAASN,EAAM,aAAa,EAAE,QAAQ,CAACO,EAAOC,IAAQ,CACxDF,EAAKE,CAAG,EAAID,CAChB,CAAG,EACD,GAAI,CACF,MAAML,EAAS,MAAMO,EAASH,CAAI,EAClCZ,EAAK,kBAAkB,UAAYC,EAAiBO,CAAM,CAC3D,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,eAAeK,EAASH,EAAM,CAE5B,OADiB,MAAMd,EAAY,KAAK,gBAAiBc,CAAI,GAC7C,IAClB,CAGAZ,EAAK,oBAAoB,iBAAiB,SAAUgB,CAAoB,EAExE,eAAeA,EAAqBV,EAAO,CACzCA,EAAM,eAAc,EACpB,MAAMW,EAAaX,EAAM,cAAc,SAAS,WAAW,MAAM,OACjE,GAAI,CACF,MAAME,EAAS,MAAMU,EAAoBD,CAAU,EAE/CT,EAAO,WACT,MAAM,oBAAoBA,EAAO,KAAK,cAAc,CAEvD,OAAQE,EAAO,CACd,MAAM,yCAAyCA,CAAK,EAAE,CACvD,CACH,CAEA,eAAeQ,EAAoBD,EAAY,CAC7C,GAAI,CAEF,OADiB,MAAMnB,EAAY,OAAO,aAAamB,CAAU,EAAE,GACnD,IACjB,OAAQP,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH"}